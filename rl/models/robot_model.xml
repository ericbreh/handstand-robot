<!-- MuJoCo Model for the 5-Link Humanoid-->
<mujoco model="FiveLinkHumanoid">

    <!-- Compiler: Angle in degrees -->
    <compiler angle="degree" inertiafromgeom="true" meshdir="assets" discardvisual="false"/>
    <option timestep="0.005" gravity="0 0 -9.81"/>

    <!-- Default Settings -->
    <default>
        <joint armature="0.1" damping="1.0" limited="true"/>
        <geom conaffinity="1" condim="3" friction="1.0 0.5 0.5" solimp="0.9 0.95 0.001" solref="0.02 1"/>
    </default>

    <!-- Visuals -->
    <visual>
        <map znear="0.01"/>
        <quality shadowsize="2048"/>
    </visual>

    <asset>
        <texture name="texplane" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 .2 .3" width="100" height="100"/>
        <material name="MatPlane" texture="texplane" shininess="0.1" specular="0.1" reflectance="0.5"/>
        <material name="TorsoMat" rgba="0.8 0.2 0.2 1"/> <!-- Red for Torso -->
        <material name="LegMat"   rgba="0.2 0.4 0.8 1"/> <!-- Blue for Legs -->
        <material name="ArmMat"   rgba="0.2 0.8 0.2 1"/> <!-- Green for Arms -->
    </asset>

    <worldbody>
        <!-- Ground Plane -->
        <geom name="ground" type="plane" size="0 0 1" material="MatPlane" condim="3"/>

        <!-- Root Body: Torso -->
        <!-- Start pos: 1.25m high -->
        <body name="torso" pos="0 0 1.25">
            <joint name="root" type="free"/>
            
            <!-- Torso Geometry: Capsule -->
            <geom name="torso_geom" type="capsule" size="0.12 0.3" mass="36" material="TorsoMat"/>

            <!-- ARMS (Attached at TOP Corners) -->
            <!-- Arms point UP - 0 angle is "Hands Up" -->

            <!-- 1. Right Arm -->
            <body name="right_arm" pos="0.19 0 0.3"> 
                <!-- Axis: 0 1 0 (Pos Y). Counter-Clockwise.
                     Arm Range: 10 to 160 (deg) -->
                <joint name="joint_q1" type="hinge" axis="0 1 0" range="10 160"/>
                <!-- Geometry points up -->
                <geom name="right_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat"/>
                <site name="right_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>

            <!-- 2. Left Arm -->
            <body name="left_arm" pos="-0.19 0 0.3">
                <!-- Axis: 0 -1 0 (Neg Y). Clockwise.
                     Arm Range: 10 to 160 (deg) -->
                <joint name="joint_q2" type="hinge" axis="0 -1 0" range="10 160"/>
                <!-- Geometry points up -->
                <geom name="left_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat"/>
                <site name="left_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>

            <!-- LEGS (Attached at BOTTOM Corners) -->
            <!-- Legs point DOWN - 0 angle is "Standing" -->

            <!-- 3. Right Leg -->
            <body name="right_leg" pos="0.19 0 -0.3">
                <!-- Axis: 0 -1 0 (Neg Y). Clockwise.
                     0 = Straight Down. 90 = Side Split. -->
                <joint name="joint_q3" type="hinge" axis="0 -1 0" range="0 90"/>
                <geom name="right_leg_geom" type="capsule" fromto="0 0 0 0 0 -0.9" size="0.06" mass="12" material="LegMat"/>
                <site name="right_foot_site" pos="0 0 -0.9" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
            </body>

            <!-- 4. Left Leg -->
            <body name="left_leg" pos="-0.19 0 -0.3">
                <!-- Axis: 0 1 0 (Pos Y). Counter-Clockwise.
                     0 = Straight Down. 90 = Side Split. -->
                <joint name="joint_q4" type="hinge" axis="0 1 0" range="0 90"/>
                <geom name="left_leg_geom" type="capsule" fromto="0 0 0 0 0 -0.9" size="0.06" mass="12" material="LegMat"/>
                <site name="left_foot_site" pos="0 0 -0.9" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
            </body>

        </body>
    </worldbody>

    <!-- Actuators -->
    <actuator>
        <!-- Torque Limits -->
        <motor name="m_q1" joint="joint_q1" ctrlrange="-200 200"/>
        <motor name="m_q2" joint="joint_q2" ctrlrange="-200 200"/>
        <motor name="m_q3" joint="joint_q3" ctrlrange="-300 300"/> <!-- Legs get more torque -->
        <motor name="m_q4" joint="joint_q4" ctrlrange="-300 300"/> <!-- Legs get more torque -->
    </actuator>

    <sensor>
        <jointpos name="q1_pos" joint="joint_q1"/>
        <jointvel name="q1_vel" joint="joint_q1"/>
        <jointpos name="q2_pos" joint="joint_q2"/>
        <jointvel name="q2_vel" joint="joint_q2"/>
        <jointpos name="q3_pos" joint="joint_q3"/>
        <jointvel name="q3_vel" joint="joint_q3"/>
        <jointpos name="q4_pos" joint="joint_q4"/>
        <jointvel name="q4_vel" joint="joint_q4"/>
        <framequat name="torso_quat" objtype="body" objname="torso"/>
        <framelinvel name="torso_vel" objtype="body" objname="torso"/>

        <!-- Touch Sensors (Critical for Handstand Reward) -->
        <touch name="touch_right_hand" site="right_hand_site"/>
        <touch name="touch_left_hand"  site="left_hand_site"/>
        <touch name="touch_right_foot" site="right_foot_site"/>
        <touch name="touch_left_foot"  site="left_foot_site"/>
    </sensor>

</mujoco>