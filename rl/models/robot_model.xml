<!-- MuJoCo Model for the 5-Link Cartwheel System (v18 - SUPER STRONG MOTORS) -->
<mujoco model="FiveLinkHumanoid">

    <compiler angle="degree" inertiafromgeom="true" meshdir="assets" discardvisual="false"/>
    <option timestep="0.005" gravity="0 0 -9.81"/>

    <default>
        <!-- Increased armature for stability with high torque -->
        <joint limited="true"/>
        <geom friction="0.7 0.005 0.0001"/>
        <!-- <geom conaffinity="1" condim="3" friction="1.0 0.5 0.5" solimp="0.9 0.95 0.001" solref="0.02 1"/> -->
    </default>

    <visual>
        <map znear="0.01"/>
        <quality shadowsize="2048"/>
    </visual>

    <asset>
        <texture name="texplane" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 .2 .3" width="100" height="100"/>
        <material name="MatPlane" texture="texplane" shininess="0.1" specular="0.1" reflectance="0.5"/>
        <material name="TorsoMat" rgba="0.8 0.2 0.2 1"/>
        <material name="LegMat"   rgba="0.2 0.4 0.8 1"/>
        <material name="ArmMat"   rgba="0.2 0.8 0.2 1"/>
    </asset>

    <worldbody>
        <geom name="ground" type="plane" size="0 0 1" material="MatPlane" condim="3"/>

        <!-- Root Body: Torso (Start at 1.25m) -->
        <body name="torso" pos="0 0 1.25">
            
            <!-- PLANAR JOINTS -->
            <joint name="root_y" type="slide" axis="0 1 0" limited="false"/>
            <joint name="root_z" type="slide" axis="0 0 1" limited="false"/>
            <joint name="root_roll" type="hinge" axis="1 0 0" limited="false"/>

            <geom name="torso_geom" type="capsule" size="0.12 0.3" mass="36" material="TorsoMat"/>

            <!-- ARMS (Sideways Config) -->
            <body name="right_arm" pos="0 -0.19 0.3">
                <joint name="joint_q1" type="hinge" axis="1 0 0" range="10 160"/>
                <geom name="right_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat"/>
                <site name="right_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>

            <body name="left_arm" pos="0 0.19 0.3">
                <joint name="joint_q2" type="hinge" axis="-1 0 0" range="10 160"/>
                <geom name="left_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat"/>
                <site name="left_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>

            <!-- LEGS (Sideways Config) -->
            <body name="right_leg" pos="0 -0.19 -0.3">
                <joint name="joint_q3" type="hinge" axis="-1 0 0" range="-10 90"/>
                <geom name="right_leg_geom" type="capsule" fromto="0 0 0 0 0 -0.9" size="0.06" mass="12" material="LegMat"/>
                <site name="right_foot_site" pos="0 0 -0.95" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
            </body>

            <body name="left_leg" pos="0 0.19 -0.3">
                <joint name="joint_q4" type="hinge" axis="1 0 0" range="-10 90"/>
                <geom name="left_leg_geom" type="capsule" fromto="0 0 0 0 0 -0.9" size="0.06" mass="12" material="LegMat"/>
                <site name="left_foot_site" pos="0 0 -0.95" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
            </body>

        </body>
    </worldbody>

    <actuator>
        <!-- Reduced torque to manageable levels for learning -->
        <motor name="m_q1" joint="joint_q1" ctrlrange="-150 150"/>
        <motor name="m_q2" joint="joint_q2" ctrlrange="-150 150"/>
        <motor name="m_q3" joint="joint_q3" ctrlrange="-150 150"/>
        <motor name="m_q4" joint="joint_q4" ctrlrange="-150 150"/>
    </actuator>

    <sensor>
        <jointpos name="q1_pos" joint="joint_q1"/>
        <jointvel name="q1_vel" joint="joint_q1"/>
        <jointpos name="q2_pos" joint="joint_q2"/>
        <jointvel name="q2_vel" joint="joint_q2"/>
        <jointpos name="q3_pos" joint="joint_q3"/>
        <jointvel name="q3_vel" joint="joint_q3"/>
        <jointpos name="q4_pos" joint="joint_q4"/>
        <jointvel name="q4_vel" joint="joint_q4"/>
        
        <touch name="touch_right_hand" site="right_hand_site"/>
        <touch name="touch_left_hand"  site="left_hand_site"/>
        <touch name="touch_right_foot" site="right_foot_site"/>
        <touch name="touch_left_foot"  site="left_foot_site"/>
    </sensor>

</mujoco>