<mujoco model="FiveLinkHumanoid">

    <compiler angle="degree" inertiafromgeom="true" meshdir="assets"/>
    <option integrator="implicitfast" timestep="0.002"/>  <!-- Changed integration from RK4 to implictfast -->

    <!-- <default>
        <joint armature="0.25" damping="60.0" limited="true"/>
        <geom conaffinity="1" condim="3" friction="4.0 0.05 0.005" solimp=".99 .99 .001" solref="0.004 1" margin="0.001"/>
        
        <position kp="2000" forcerange="-3000 3000"/>
    </default> -->

    <default>
        <joint armature="0.2" damping="20.0" limited="true"/>
        <geom conaffinity="1" condim="3" friction="0.8 0.05 0.005" solimp=".99 .99 .001" solref="0.02 1" margin="0.001"/>
        <!-- CHange the solref from 0.004 to 0.02  and damping from 20 to 60 -->
        <position kp="1000" forcerange="-1500 1500"/>
    </default>


    <visual>
        <map znear="0.01"/>
        <quality shadowsize="2048"/>
    </visual>
<asset>
        <texture name="texplane" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 .2 .3" width="100" height="100"/>
        <material name="MatPlane" texture="texplane" shininess="0.1" specular="0.1" reflectance="0.5"/>
        <material name="TorsoMat" rgba="0.8 0.2 0.2 1"/>
        <material name="LegMat"   rgba="0.2 0.4 0.8 1"/>
        <material name="ArmMat"   rgba="0.2 0.8 0.2 1"/>
    </asset>

    <worldbody>
        <geom name="ground" type="plane" size="20 20 0.5" material="MatPlane"/>
        
        <body name="torso" pos="0 0 1.25">
            <joint name="root_x" type="slide" axis="1 0 0" limited="false"/>
            <joint name="root_z" type="slide" axis="0 0 1" limited="false"/>
            <joint name="root_pitch" type="hinge" axis="0 1 0" limited="false"/>

            <geom name="torso_geom" type="capsule" size="0.12 0.3" mass="36" material="TorsoMat"/>

            <body name="head_body" pos="0.0 0 0.55">
                <geom name="head_geom" type="sphere" size="0.12" mass="5" material="TorsoMat" contype="1" conaffinity="1"/>
            </body>

            <body name="right_arm" pos="0.19 0 0.3">
                <joint name="right_arm" type="hinge" axis="0 1 0" range="-20 180"/>
                <geom name="right_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat" contype="1" conaffinity="1"/>
                <site name="right_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>

            <body name="left_arm" pos="-0.19 0 0.3">
                <joint name="left_arm" type="hinge" axis="0 -1 0" range="-20 180"/>
                <geom name="left_arm_geom" type="capsule" fromto="0 0 0 0 0 0.7" size="0.05" mass="4" material="ArmMat" contype="1" conaffinity="1"/>
                <site name="left_hand_site" pos="0 0 0.7" size="0.04" type="sphere" rgba="0.9 0.9 0 0.5"/>
            </body>
            
            <body name="right_leg" pos="-0.19 0 -0.3">
                <joint name="right_hip" type="hinge" axis="0 1 0" range="-100 100"/>
                
                <geom name="right_thigh" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.06" mass="6" material="LegMat"/>
                
                <body name="right_shin" pos="0 0 -0.45">
                    <joint name="right_knee" type="hinge" axis="0 1 0" range="0 150"/>
                    
                    <geom name="right_shin_geom" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.05" mass="6" material="LegMat"/>
                    <site name="right_foot_site" pos="0 0 -0.45" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
                </body>
            </body>

            <body name="left_leg" pos="0.19 0 -0.3">
                <joint name="left_hip" type="hinge" axis="0 1 0" range="-100 100"/>
                
                <geom name="left_thigh" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.06" mass="6" material="LegMat"/>
                
                <body name="left_shin" pos="0 0 -0.45">
                    <joint name="left_knee" type="hinge" axis="0 1 0" range="0 150"/>
                    
                    <geom name="left_shin_geom" type="capsule" fromto="0 0 0 0 0 -0.45" size="0.05" mass="6" material="LegMat"/>
                    <site name="left_foot_site" pos="0 0 -0.45" size="0.05" type="sphere" rgba="0 0.9 0.9 0.5"/>
                </body>
            </body>
        </body>
    </worldbody>

    <actuator>
        <position name="right_arm_servo" joint="right_arm" ctrlrange="-0.35 3.14"/>
        <position name="left_arm_servo"  joint="left_arm"  ctrlrange="-0.35 3.14"/>

        <position name="right_hip_servo" joint="right_hip" ctrlrange="-1.57 1.57"/>
        
        <position name="right_knee_servo" joint="right_knee" ctrlrange="0.0 2.62"/>

        <position name="left_hip_servo"  joint="left_hip"  ctrlrange="-1.57 1.57"/>
        
        <position name="left_knee_servo" joint="left_knee" ctrlrange="0.0 2.62"/>
    </actuator>

    <sensor>
        <jointpos name="left_arm_pos" joint="left_arm"/>
        <jointvel name="left_arm_vel" joint="left_arm"/>
        <jointpos name="right_arm_pos" joint="right_arm"/>
        <jointvel name="right_arm_vel" joint="right_arm"/>
        <jointpos name="left_hip_pos" joint="left_hip"/>
        <jointvel name="left_hip_vel" joint="left_hip"/>
        <jointpos name="right_hip_pos" joint="right_hip"/>
        <jointvel name="right_hip_vel" joint="right_hip"/>
        <jointpos name="left_knee_pos" joint="left_knee"/>
        <jointvel name="left_knee_vel" joint="left_knee"/>
        <jointpos name="right_knee_pos" joint="right_knee"/>
        <jointvel name="right_knee_vel" joint="right_knee"/>
        <touch name="touch_right_hand" site="right_hand_site"/>
        <touch name="touch_left_hand"  site="left_hand_site"/>
        <touch name="touch_right_foot" site="right_foot_site"/>
        <touch name="touch_left_foot"  site="left_foot_site"/>
    </sensor>
</mujoco>